<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WiFi æµ·æŠ¥ç”Ÿæˆå™¨</title>
    <!-- å¼•å…¥ Tailwind CSS (æ ·å¼åº“) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- å¼•å…¥ React å’Œ ReactDOM -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <!-- å¼•å…¥ Babel (è®©æµè§ˆå™¨èƒ½è¿è¡Œ React ä»£ç ) -->
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <!-- å¼•å…¥ QRious (ç”ŸæˆäºŒç»´ç ) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/qrious/4.0.2/qrious.min.js"></script>

    <style>
        /* è§£å†³ç§»åŠ¨ç«¯ç‚¹å‡»é«˜äº®é—®é¢˜ */
        * { -webkit-tap-highlight-color: transparent; }
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; }
    </style>
</head>
<body class="bg-slate-50 text-slate-800">

    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // --- ç®€å•çš„å›¾æ ‡ç»„ä»¶ (æ›¿æ¢ Lucide-React ä»¥ä¾¿åœ¨å•æ–‡ä»¶ä¸­è¿è¡Œ) ---
        const IconWifi = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M5 12.55a11 11 0 0 1 14.08 0"/><path d="M1.42 9a16 16 0 0 1 21.16 0"/><path d="M8.53 16.11a6 6 0 0 1 6.95 0"/><line x1="12" y1="20" x2="12.01" y2="20"/></svg>;
        const IconEye = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/><circle cx="12" cy="12" r="3"/></svg>;
        const IconEyeOff = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M17.94 17.94A10.07 10.07 0 0 1 12 20c-7 0-11-8-11-8a18.45 18.45 0 0 1 5.06-5.94M9.9 4.24A9.12 9.12 0 0 1 12 4c7 0 11 8 11 8a18.5 18.5 0 0 1-2.16 3.19m-6.72-1.07-2.3 2.3"/><line x1="1" y1="1" x2="23" y2="23"/></svg>;
        const IconDownload = () => <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>;
        const IconSmartphone = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><rect x="5" y="2" width="14" height="20" rx="2" ry="2"/><line x1="12" y1="18" x2="12.01" y2="18"/></svg>;
        const IconPrinter = () => <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 6 2 18 2 18 9"/><path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"/><rect x="6" y="14" width="12" height="8"/></svg>;
        const IconChevronDown = () => <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="6 9 12 15 18 9"/></svg>;
        const IconChevronUp = () => <svg xmlns="http://www.w3.org/2000/svg" width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="18 15 12 9 6 15"/></svg>;
        const IconCamera = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><path d="M23 19a2 2 0 0 1-2 2H3a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h4l2-3h6l2 3h4a2 2 0 0 1 2 2z"/><circle cx="12" cy="13" r="4"/></svg>;
        const IconCheck = () => <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="2" strokeLinecap="round" strokeLinejoin="round"><polyline points="20 6 9 17 4 12"/></svg>;

        // --- ä¸»ç¨‹åº ---
        function App() {
            const [ssid, setSsid] = useState('');
            const [password, setPassword] = useState('');
            const [encryption, setEncryption] = useState('WPA');
            const [showPassword, setShowPassword] = useState(false);
            const [showAdvanced, setShowAdvanced] = useState(false);
            const [mode, setMode] = useState('card'); // 'card' or 'poster'
            
            const canvasRef = useRef(null);
            
            // ç›‘å¬æ•°æ®å˜åŒ–ï¼Œç»˜åˆ¶äºŒç»´ç 
            useEffect(() => {
                if (ssid) {
                    generateQR();
                }
            }, [ssid, password, encryption, mode]);

            const generateQR = () => {
                if (!window.QRious || !canvasRef.current) return;

                // æ™ºèƒ½ä¿®æ­£åŠ å¯†æ–¹å¼
                let finalEncryption = encryption;
                if (password && encryption === 'nopass') finalEncryption = 'WPA';
                else if (!password) finalEncryption = 'nopass';

                const wifiString = `WIFI:S:${ssid};T:${finalEncryption};P:${password};;`;
                const size = mode === 'poster' ? 300 : 200;

                new window.QRious({
                    element: canvasRef.current,
                    value: wifiString,
                    size: size,
                    level: 'H',
                    background: 'white',
                    foreground: 'black',
                });
            };

            const downloadImage = () => {
                if (!ssid) return;

                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                
                if (mode === 'card') {
                    // === å¡ç‰‡æ¨¡å¼ ===
                    const width = 400;
                    const height = 500;
                    canvas.width = width;
                    canvas.height = height;
                    
                    ctx.fillStyle = '#fce7f3'; 
                    ctx.fillRect(0, 0, width, height);
                    
                    ctx.fillStyle = 'white';
                    ctx.fillRect(50, 50, 300, 300);
                    // ç»˜åˆ¶äºŒç»´ç 
                    if (canvasRef.current) ctx.drawImage(canvasRef.current, 100, 100, 200, 200);

                    ctx.fillStyle = '#1f2937';
                    ctx.font = 'bold 20px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText('WiFi è¿æ¥å¡', width/2, 390);
                    
                    ctx.font = '16px sans-serif';
                    ctx.fillText(`ID: ${ssid}`, width/2, 420);
                    ctx.fillText(`å¯†ç : ${password || 'æ— '}`, width/2, 450);

                } else {
                    // === æµ·æŠ¥æ¨¡å¼ ===
                    const width = 800;
                    const height = 1131; // A4
                    canvas.width = width;
                    canvas.height = height;

                    const grad = ctx.createLinearGradient(0, 0, 0, height);
                    grad.addColorStop(0, '#2563eb');
                    grad.addColorStop(1, '#1e40af');
                    ctx.fillStyle = grad;
                    ctx.fillRect(0, 0, width, height);

                    ctx.fillStyle = 'white';
                    ctx.shadowColor = "rgba(0,0,0,0.3)";
                    ctx.shadowBlur = 20;
                    ctx.fillRect(100, 150, 600, 800);
                    ctx.shadowBlur = 0;

                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 50px sans-serif';
                    ctx.textAlign = 'center';
                    ctx.fillText('å…è´¹ WiFi', width/2, 100);

                    if (canvasRef.current) ctx.drawImage(canvasRef.current, 250, 250, 300, 300);

                    ctx.fillStyle = '#1f2937';
                    ctx.font = 'bold 30px sans-serif';
                    ctx.fillText(`åç§°: ${ssid}`, width/2, 600);
                    ctx.font = '24px sans-serif';
                    ctx.fillText(`å¯†ç : ${password || 'æ— éœ€å¯†ç '}`, width/2, 650);

                    ctx.fillStyle = '#6b7280';
                    ctx.font = '20px sans-serif';
                    ctx.fillText('1. æ‰“å¼€æ‰‹æœºç›¸æœº  2. æ‰«æäºŒç»´ç   3. ç‚¹å‡»è¿æ¥', width/2, 850);
                }

                const link = document.createElement('a');
                link.download = `WiFi-${mode}-${ssid}.png`;
                link.href = canvas.toDataURL();
                link.click();
            };

            return (
                <div className="min-h-screen flex flex-col items-center py-6 px-4">
                    
                    <div className="w-full max-w-lg">
                        {/* æ ‡é¢˜ */}
                        <div className="mb-6 text-center">
                            <h1 className="text-2xl font-bold text-blue-600 flex items-center justify-center gap-2">
                                <span className="text-blue-600"><IconWifi /></span>
                                WiFi ç ç”Ÿæˆå™¨
                            </h1>
                            <p className="text-slate-500 text-sm mt-1">ç»™å®¶é‡Œæˆ–å°åº—åˆ¶ä½œä¸€å¼ è¿æ¥æµ·æŠ¥</p>
                        </div>

                        {/* è¾“å…¥æ¡† */}
                        <div className="bg-white rounded-2xl shadow-sm p-5 mb-6 border border-slate-100">
                            <div className="space-y-4">
                                <div>
                                    <label className="block text-sm font-semibold text-slate-700 mb-1">WiFi åå­— (SSID)</label>
                                    <input
                                        type="text"
                                        value={ssid}
                                        onChange={(e) => setSsid(e.target.value)}
                                        placeholder="è¯·è¾“å…¥ WiFi åç§°"
                                        className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none transition-all"
                                    />
                                </div>

                                <div>
                                    <label className="block text-sm font-semibold text-slate-700 mb-1">WiFi å¯†ç </label>
                                    <div className="relative">
                                        <input
                                            type={showPassword ? "text" : "password"}
                                            value={password}
                                            onChange={(e) => setPassword(e.target.value)}
                                            placeholder="ä¸å¡«åˆ™é»˜è®¤ä¸ºæ— å¯†ç "
                                            className="w-full px-4 py-3 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-blue-500 outline-none pr-12 transition-all"
                                        />
                                        <button
                                            onClick={() => setShowPassword(!showPassword)}
                                            className="absolute right-3 top-3.5 text-slate-400 hover:text-slate-600"
                                        >
                                            {showPassword ? <IconEyeOff /> : <IconEye />}
                                        </button>
                                    </div>
                                </div>

                                {/* é«˜çº§é€‰é¡¹ */}
                                <div>
                                    <button 
                                        onClick={() => setShowAdvanced(!showAdvanced)}
                                        className="text-xs text-slate-400 flex items-center gap-1 hover:text-slate-600 transition-colors"
                                    >
                                        {showAdvanced ? <IconChevronUp /> : <IconChevronDown />}
                                        {showAdvanced ? 'æ”¶èµ·é«˜çº§é€‰é¡¹' : 'é«˜çº§é€‰é¡¹ (åŠ å¯†æ–¹å¼)'}
                                    </button>
                                    
                                    {showAdvanced && (
                                        <div className="mt-2 p-3 bg-slate-50 rounded-lg">
                                            <label className="block text-xs font-medium text-slate-500 mb-1">åŠ å¯†æ–¹å¼</label>
                                            <select
                                                value={encryption}
                                                onChange={(e) => setEncryption(e.target.value)}
                                                className="w-full text-sm p-2 bg-white border border-slate-200 rounded-lg outline-none"
                                            >
                                                <option value="WPA">WPA/WPA2 (æ ‡å‡†)</option>
                                                <option value="WEP">WEP (æ—§è®¾å¤‡)</option>
                                                <option value="nopass">æ— å¯†ç </option>
                                            </select>
                                        </div>
                                    )}
                                </div>
                            </div>
                        </div>

                        {/* æ¨¡å¼åˆ‡æ¢ */}
                        <div className="flex bg-slate-200 p-1 rounded-xl mb-6">
                            <button
                                onClick={() => setMode('card')}
                                className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all ${
                                    mode === 'card' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'
                                }`}
                            >
                                <IconSmartphone /> å°å¡ç‰‡ (å‘å¾®ä¿¡)
                            </button>
                            <button
                                onClick={() => setMode('poster')}
                                className={`flex-1 flex items-center justify-center gap-2 py-2 rounded-lg text-sm font-medium transition-all ${
                                    mode === 'poster' ? 'bg-white text-blue-600 shadow-sm' : 'text-gray-500 hover:text-gray-700'
                                }`}
                            >
                                <IconPrinter /> å¤§æµ·æŠ¥ (å»æ‰“å°)
                            </button>
                        </div>

                        {/* é¢„è§ˆåŒºåŸŸ */}
                        <div className="flex justify-center mb-6">
                            {ssid ? (
                                mode === 'card' ? (
                                    <div className="bg-pink-100 p-6 rounded-2xl shadow-sm text-center w-[300px] border border-pink-200/50 transition-all">
                                        <div className="bg-white p-3 rounded-xl inline-block shadow-sm mb-4">
                                            <canvas ref={canvasRef} />
                                        </div>
                                        <h3 className="text-pink-900/80 font-bold mb-1">æ‰«ç è¿æ¥ WiFi</h3>
                                        <div className="text-sm text-pink-800/70 bg-white/50 py-2 px-3 rounded-lg inline-block">
                                            <p className="font-medium">{ssid}</p>
                                        </div>
                                    </div>
                                ) : (
                                    <div className="bg-white w-[300px] aspect-[1/1.414] shadow-lg rounded-sm relative overflow-hidden flex flex-col items-center pt-8 border border-gray-100 transition-all">
                                        <div className="absolute top-0 left-0 w-full h-3 bg-blue-600"></div>
                                        <h2 className="text-xl font-black text-slate-800 mb-6 tracking-wide">å…è´¹ WiFi</h2>
                                        <div className="border-4 border-slate-800 p-2 rounded-xl mb-6">
                                            <canvas ref={canvasRef} />
                                        </div>
                                        <div className="text-center mb-6 px-4 w-full">
                                            <p className="text-xs text-slate-500 uppercase tracking-wider mb-1">Network Name</p>
                                            <p className="text-lg font-bold text-slate-800 mb-3 truncate px-2">{ssid}</p>
                                            <p className="text-xs text-slate-500 uppercase tracking-wider mb-1">Password</p>
                                            <div className="bg-slate-100 px-4 py-1 rounded-full inline-block max-w-full">
                                                <p className="text-base font-mono font-bold text-slate-700 truncate">{password || 'æ— å¯†ç '}</p>
                                            </div>
                                        </div>
                                        <div className="bg-slate-50 w-full mt-auto py-3 px-2 border-t border-slate-100">
                                            <div className="flex justify-between text-[10px] text-slate-500 text-center">
                                                <div className="flex flex-col items-center gap-1 w-1/3">
                                                    <span className="text-blue-500"><IconCamera /></span><span>1.æ‰“å¼€ç›¸æœº</span>
                                                </div>
                                                <div className="flex flex-col items-center gap-1 w-1/3">
                                                    <span className="text-blue-500"><IconSmartphone /></span><span>2.å¯¹å‡†äºŒç»´ç </span>
                                                </div>
                                                <div className="flex flex-col items-center gap-1 w-1/3">
                                                    <span className="text-blue-500"><IconCheck /></span><span>3.ç‚¹å‡»è¿æ¥</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                )
                            ) : (
                                <div className="bg-slate-100 w-full h-64 rounded-xl flex flex-col items-center justify-center text-slate-400 border-2 border-dashed border-slate-200">
                                    <div className="opacity-20 mb-2"><IconWifi /></div>
                                    <p className="text-sm">è¾“å…¥ WiFi ä¿¡æ¯é¢„è§ˆæ•ˆæœ</p>
                                </div>
                            )}
                        </div>

                        {/* åº•éƒ¨æŒ‰é’® */}
                        <button
                            onClick={downloadImage}
                            disabled={!ssid}
                            className={`w-full py-4 rounded-xl font-bold text-lg flex items-center justify-center gap-2 transition-all shadow-xl ${
                                ssid 
                                ? 'bg-blue-600 text-white shadow-blue-200 hover:bg-blue-700 active:scale-95' 
                                : 'bg-gray-200 text-gray-400 cursor-not-allowed shadow-none'
                            }`}
                        >
                            <IconDownload />
                            {mode === 'card' ? 'ä¿å­˜å¡ç‰‡åˆ°ç›¸å†Œ' : 'ä¿å­˜æµ·æŠ¥ (å»æ‰“å°)'}
                        </button>
                        {ssid && (
                            <p className="text-center text-xs text-orange-400 mt-3 animate-pulse">
                                ğŸ’¡ å°æç¤ºï¼šå¦‚æœç‚¹å‡»æ²¡ååº”ï¼Œè¯·é•¿æŒ‰ä¸Šé¢çš„å›¾ç‰‡æ‰‹åŠ¨ä¿å­˜
                            </p>
                        )}
                    </div>
                </div>
            );
        }

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<App />);
    </script>
</body>
</html>